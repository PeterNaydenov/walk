!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).walk=t()}(this,(function(){"use strict";function e(e){return null==e||e.nodeType?"simple":e instanceof Array?"array":"object"==typeof e?"object":"simple"}function t(t,r,o,i,a,...s){let[c,f]=i;Object.keys(t).forEach((u=>{let l=e(t[u]),b=t[u],p="array"===e(r),y=!isNaN(u),d=Symbol("ignore___");if("simple"!==l&&f){if(b=f({value:b,key:u,breadcrumbs:`${a}/${u}`,IGNORE:d},...s),b===d)return;l=e(b)}if("simple"===l){if(!c)return void(r[u]=b);let e=c({value:b,key:u,breadcrumbs:`${a}/${u}`,IGNORE:d},...s);if(e===d)return;const t=function(e,t){return t instanceof Array&&!isNaN(e)}(u,r);t?r.push(e):r[u]=e}if("object"===l){const e={};p&&y?r.push(e):r[u]=e,o.push(n(b,e,o,i,`${a}/${u}`,s))}if("array"===l){const e=[];p&&y?r.push(e):r[u]=e,o.push(n(b,e,o,i,`${a}/${u}`,s))}}))}function*n(e,n,r,o,i,a){yield t(e,n,r,o,i,...a)}return function({data:n,keyCallback:r,objectCallback:o},...i){let a,s=[],c="root",f=[r,o];switch(e(n)){case"array":a=[],t(n,a,s,f,c,...i);break;case"object":a={},t(n,a,s,f,c,...i);break;case"simple":return n}for(const e of s)e.next();return a}}));
