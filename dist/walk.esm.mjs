function e(e){return null==e||e.nodeType?"simple":e instanceof Array?"array":"object"==typeof e?"object":"simple"}function r(r,o,a,n,s,...c){let[i,u]=n;Object.keys(r).forEach(l=>{let f=e(r[l]),b=r[l],p="array"===e(o),y=!isNaN(l),h=Symbol("ignore___"),k="root"===s&&"root"===l,m=k?"root":`${s}/${l}`;if("simple"!==f&&u){if(b=u({value:b,key:l,breadcrumbs:m,IGNORE:h},...c),b===h)return;f=e(b)}if(k)a.push(t(b,o,a,n,m,c));else{if("simple"===f){if(!i)return void(k||(o[l]=b));let e=i({value:b,key:l,breadcrumbs:m,IGNORE:h},...c);if(e===h)return;const r=function(e,r){return r instanceof Array&&!isNaN(e)}(l,o);r?o.push(e):o[l]=e}if("object"===f){const e={};p&&y?o.push(e):o[l]=e,a.push(t(b,e,a,n,m,c))}if("array"===f){const e=[];p&&y?o.push(e):o[l]=e,a.push(t(b,e,a,n,m,c))}}})}function*t(e,t,o,a,n,s){yield r(e,t,o,a,n,...s)}function o(t,...o){let a,{data:n,keyCallback:s,objectCallback:c}=t,i=[],u="root",l=[s,c];switch(e(n)){case"array":a=[],r({root:n},a,i,l,u,...o);break;case"object":a={},r({root:n},a,i,l,u,...o);break;case"simple":return n}for(const e of i)e.next();return a}export{o as default};
