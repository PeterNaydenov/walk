"use strict";function e(e){return null==e||e.nodeType?"simple":e instanceof Array?"array":"object"==typeof e?"object":"simple"}function r(r,o,a,s,n,...c){let[i,u]=s;Object.keys(r).forEach((l=>{let f=e(r[l]),b=r[l],p="array"===e(o),y=!isNaN(l),m=Symbol("ignore___"),h="root"===n&&"root"===l,k=h?"root":`${n}/${l}`;if("simple"!==f&&u){if(b=u({value:b,key:l,breadcrumbs:k,IGNORE:m},...c),b===m)return;f=e(b)}if(h)a.push(t(b,o,a,s,k,c));else{if("simple"===f){if(!i)return void(h||(o[l]=b));let e=i({value:b,key:l,breadcrumbs:k,IGNORE:m},...c);if(e===m)return;const r=function(e,r){return r instanceof Array&&!isNaN(e)}(l,o);r?o.push(e):o[l]=e}if("object"===f){const e={};p&&y?o.push(e):o[l]=e,a.push(t(b,e,a,s,k,c))}if("array"===f){const e=[];p&&y?o.push(e):o[l]=e,a.push(t(b,e,a,s,k,c))}}}))}function*t(e,t,o,a,s,n){yield r(e,t,o,a,s,...n)}module.exports=function(t,...o){let a,{data:s,keyCallback:n,objectCallback:c}=t,i=[],u="root",l=[n,c];switch(e(s)){case"array":a=[],r({root:s},a,i,l,u,...o);break;case"object":a={},r({root:s},a,i,l,u,...o);break;case"simple":return s}for(const e of i)e.next();return a};
