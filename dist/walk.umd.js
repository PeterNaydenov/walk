!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).walk=t()}(this,function(){"use strict";function e(e){return null==e||e.nodeType?"simple":e instanceof Array?"array":"object"==typeof e?"object":"simple"}function t(t,r,n,i,s,...a){let[f,u]=i;Object.keys(t).forEach(c=>{let l=e(t[c]),p=t[c],b="array"===e(r),y=!isNaN(c),d=Symbol("ignore___"),h="root"===s&&"root"===c,m=h?"root":`${s}/${c}`;if("simple"!==l&&u){if(p=u({value:p,key:c,breadcrumbs:m,IGNORE:d},...a),p===d)return;l=e(p)}if(h)n.push(o(p,r,n,i,m,a));else{if("simple"===l){if(!f)return void(h||(r[c]=p));let e=f({value:p,key:c,breadcrumbs:m,IGNORE:d},...a);if(e===d)return;const t=function(e,t){return t instanceof Array&&!isNaN(e)}(c,r);t?r.push(e):r[c]=e}if("object"===l){const e={};b&&y?r.push(e):r[c]=e,n.push(o(p,e,n,i,m,a))}if("array"===l){const e=[];b&&y?r.push(e):r[c]=e,n.push(o(p,e,n,i,m,a))}}})}function*o(e,o,r,n,i,s){yield t(e,o,r,n,i,...s)}return function(o,...r){let n,{data:i,keyCallback:s,objectCallback:a}=o,f=[],u="root",c=[s,a];switch(e(i)){case"array":n=[],t({root:i},n,f,c,u,...r);break;case"object":n={},t({root:i},n,f,c,u,...r);break;case"simple":return i}for(const e of f)e.next();return n}});
